<view class="detail-page">
  <intro-second-floor />
  <view wx:if="{{loading}}" class="loading">åŠ è½½ä¸­...</view>
  <view wx:else class="detail-container">
    <view class="detail-image-wrapper">
      <image src="{{activity.image}}" mode="aspectFill" class="detail-image" />
    </view>
    
    <view class="detail-content">
      <view class="detail-header">
        <text class="detail-title">{{activity.name || activity.title}}</text>
        <text class="activity-status status-{{activity.statusClass}}">{{activity.statusLabel}}</text>
      </view>

      <view class="detail-meta">
        <view class="meta-item">
          <text class="meta-icon">ğŸ•’</text>
          <text class="meta-text">æ—¶é—´ï¼š{{activity.timeStr || activity.time}}</text>
        </view>
        <view class="meta-item">
          <text class="meta-icon">ğŸ“</text>
          <text class="meta-text">åœ°ç‚¹ï¼š{{activity.address}}</text>
        </view>
      </view>

      <view class="detail-section">
        <view class="section-title">æ´»åŠ¨ç®€ä»‹</view>
        <rich-text nodes="{{activity.intro}}" class="rich-content"></rich-text>
      </view>

      <!-- ä»‹ç»å›¾ç‰‡ -->
      <view class="intro-images-section" wx:if="{{activity.intro_images && activity.intro_images.length > 0}}">
        <image 
          wx:for="{{activity.intro_images}}" 
          wx:key="index"
          src="{{item}}" 
          mode="widthFix" 
          class="intro-image"
          bindtap="previewImage"
          data-url="{{item}}"
          data-urls="{{activity.intro_images}}"
        />
      </view>
    </view>

    <view class="detail-footer">
      <button class="join-btn" bindtap="onJoin">{{buttonText}}</button>
    </view>
  </view>
</view>

<!-- æŠ¥åæ–¹å¼å¼¹çª— -->
<view class="modal-overlay {{showModal ? 'show' : ''}}" bindtap="closeModal">
  <view class="modal-content" catchtap="stopPropagation">
    <view class="modal-header">
      <text class="modal-title">æŠ¥åæ–¹å¼</text>
      <text class="modal-close" bindtap="closeModal">Ã—</text>
    </view>
    <view class="modal-body">
      <rich-text nodes="{{activity.register_info || 'æš‚æ— æŠ¥åä¿¡æ¯'}}" class="register-info-text"></rich-text>
      <button class="copy-btn" bindtap="copyRegisterInfo">å¤åˆ¶</button>
    </view>
  </view>
</view>