<view class="leaders-page">
  <!-- Banner 轮播 -->
  <view class="banner-section" wx:if="{{banners.length > 0}}">
    <swiper 
      class="banner-swiper" 
      indicator-dots="{{true}}" 
      indicator-color="rgba(255, 255, 255, 0.5)" 
      indicator-active-color="#ffffff" 
      autoplay="{{true}}" 
      interval="3000" 
      duration="500" 
      circular="{{true}}"
    >
      <swiper-item wx:for="{{banners}}" wx:key="index">
        <image 
          src="{{item}}" 
          class="banner-image" 
          mode="aspectFill" 
        />
      </swiper-item>
    </swiper>
    <!-- 渐变遮罩和标题 -->
    <view class="banner-overlay">
      <view class="banner-title-wrapper">
        <text class="banner-title">小事带领人计划</text>
        <view class="banner-subtitle">
          <text>欢迎行动者前往所在社区的居民委员会，</text>
          <text>链接你的带领人</text>
        </view>
      </view>
    </view>
  </view>

  <!-- 筛选区域 -->
  <view class="filters-section">
    <view class="container">
      <view class="filters-content">
        <!-- 街道筛选 (下拉模式) -->
        <view class="dropdown-filter">
          <view class="dropdown-trigger" bindtap="toggleStreetDropdown">
            <text class="dropdown-text">{{selectedStreetText}}</text>
            <view class="dropdown-arrow {{streetDropdownOpen ? 'open' : ''}}">▼</view>
          </view>
          <view class="dropdown-options {{streetDropdownOpen ? 'show' : ''}}">
            <view
              class="dropdown-option {{selectedStreet === '' ? 'selected' : ''}}"
              bindtap="onStreetFilter"
              data-street=""
            >
              全部街道
            </view>
            <view
              wx:for="{{streets}}"
              wx:key="*this"
              class="dropdown-option {{selectedStreet === item ? 'selected' : ''}}"
              bindtap="onStreetFilter"
              data-street="{{item}}"
            >
              {{item}}
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- 带领人列表 -->
  <view class="leaders-section">
    <view class="container">
      <view class="section-title" wx:if="{{ leaders.length > 0 }}">社区带领人</view>
      
      <!-- 加载状态 -->
      <view wx:if="{{ loading }}" class="loading">
        <text>加载中...</text>
      </view>

      <!-- 空状态 -->
      <view wx:elif="{{ leaders.length === 0 }}" class="empty-state">
        <text class="empty-text">暂无带领人数据</text>
      </view>

      <!-- 带领人列表 -->
      <view wx:else class="leaders-list">
        <leader-card
          wx:for="{{ leaders }}"
          wx:key="_id"
          leader="{{ item }}"
          binderror="onImageError"
        />
      </view>

      <!-- 加载更多 -->
      <view wx:if="{{ hasMore && !loading }}" class="load-more">
        <button class="btn btn-primary" bindtap="onLoadMore">加载更多</button>
      </view>

      <!-- 没有更多数据 -->
      <view wx:if="{{ !hasMore && leaders.length > 0 }}" class="no-more">
        <text>没有更多数据了</text>
      </view>
    </view>
  </view>
</view>
