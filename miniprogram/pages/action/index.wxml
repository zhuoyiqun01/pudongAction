<!-- pages/action/index.wxml -->
<view class="container">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="page-header">
    <view class="header-title">å°äº‹è¡ŒåŠ¨å§</view>
    <view class="header-subtitle">å‘ç°æœ‰è¶£çš„å°äº‹ï¼Œä¸€èµ·å‚ä¸è¡ŒåŠ¨</view>
  </view>

  <!-- ç­›é€‰å™¨ -->
  <view class="filter-tabs">
    <view
      class="filter-tab {{currentFilter === 'all' ? 'active' : ''}}"
      data-filter="all"
      bindtap="switchFilter"
    >
      å…¨éƒ¨
    </view>
    <view
      class="filter-tab {{currentFilter === 'active' ? 'active' : ''}}"
      data-filter="active"
      bindtap="switchFilter"
    >
      è¿›è¡Œä¸­
    </view>
    <view
      class="filter-tab {{currentFilter === 'completed' ? 'active' : ''}}"
      data-filter="completed"
      bindtap="switchFilter"
    >
      å·²å®Œæˆ
    </view>
  </view>

  <!-- æ´»åŠ¨åˆ—è¡¨ -->
  <view class="actions-list">
    <!-- è¿›è¡Œä¸­çš„æ´»åŠ¨ -->
    <view wx:if="{{currentFilter === 'all' || currentFilter === 'active'}}">
      <view class="section-title">è¿›è¡Œä¸­çš„æ´»åŠ¨</view>
      <view
        wx:for="{{activeActions}}"
        wx:key="id"
        class="action-card"
        data-id="{{item.id}}"
        bindtap="viewActionDetail"
      >
        <view class="action-header">
          <view class="category-badge">
            <text class="category-icon">{{getCategoryIcon(item.category)}}</text>
            <text class="category-name">{{getCategoryName(item.category)}}</text>
          </view>
          <view class="action-status active">è¿›è¡Œä¸­</view>
        </view>

        <view class="action-title">{{item.title}}</view>
        <view class="action-desc">{{item.description}}</view>

        <view class="action-meta">
          <view class="meta-item">
            <text class="meta-icon">ğŸ‘¥</text>
            <text>{{item.participants}}äººå‚ä¸</text>
          </view>
          <view class="meta-item">
            <text class="meta-icon">ğŸ“</text>
            <text>{{item.location}}</text>
          </view>
        </view>

        <view class="action-footer">
          <view class="creator">å‘èµ·äººï¼š{{item.creator}}</view>
          <button
            class="join-btn"
            data-id="{{item.id}}"
            bindtap="joinAction"
          >
            åŠ å…¥è¡ŒåŠ¨
          </button>
        </view>
      </view>
    </view>

    <!-- å·²å®Œæˆçš„æ´»åŠ¨ -->
    <view wx:if="{{currentFilter === 'all' || currentFilter === 'completed'}}">
      <view class="section-title">å·²å®Œæˆçš„æ´»åŠ¨</view>
      <view
        wx:for="{{completedActions}}"
        wx:key="id"
        class="action-card completed"
        data-id="{{item.id}}"
        bindtap="viewActionDetail"
      >
        <view class="action-header">
          <view class="category-badge">
            <text class="category-icon">{{getCategoryIcon(item.category)}}</text>
            <text class="category-name">{{getCategoryName(item.category)}}</text>
          </view>
          <view class="action-status completed">å·²å®Œæˆ</view>
        </view>

        <view class="action-title">{{item.title}}</view>
        <view class="action-desc">{{item.description}}</view>

        <view class="action-meta">
          <view class="meta-item">
            <text class="meta-icon">ğŸ‘¥</text>
            <text>{{item.participants}}äººå‚ä¸</text>
          </view>
          <view class="meta-item">
            <text class="meta-icon">ğŸ“</text>
            <text>{{item.location}}</text>
          </view>
        </view>

        <view class="action-footer">
          <view class="creator">å‘èµ·äººï¼š{{item.creator}}</view>
          <view class="completed-badge">âœ… å·²å®Œæˆ</view>
        </view>
      </view>
    </view>
  </view>

  <!-- åˆ›å»ºæ–°æ´»åŠ¨æŒ‰é’® -->
  <view class="create-action-btn" bindtap="createNewAction">
    <text class="create-icon">â•</text>
    <text>å‘èµ·æ–°æ´»åŠ¨</text>
  </view>
</view>
