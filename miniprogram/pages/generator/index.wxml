<view class="generator-page fade-in">
  <view class="header-area">
    <text class="title">ç¤¾åŒºå°äº‹ç”Ÿæˆå™¨</text>
    <text class="sub-title">ä½ æ­£åœ¨å…³æ³¨ä»€ä¹ˆé—®é¢˜æˆ–è¯é¢˜ï¼Ÿ(å¦‚ï¼šè€æ—§å°åŒºæ¥¼é“å †ç‰©)</text>
  </view>

  <view class="input-area">
    <input 
      class="main-input" 
      placeholder="è¾“å…¥åœºæ™¯..." 
      value="{{inputValue}}" 
      bindinput="onInput"
      confirm-type="search"
      bindconfirm="generate"
    />
    <button 
      class="generate-btn {{isLoading ? 'loading' : ''}}" 
      bindtap="generate" 
      disabled="{{isLoading}}"
    >
      {{isLoading ? 'ğŸ¤” AI æ­£åœ¨æ€è€ƒä¸­...' : 'ç”Ÿæˆåˆ›æ„ç‚¹å­'}}
    </button>
  </view>

  <view class="tags-area" wx:if="{{!showResult && !isLoading}}">
    <view class="tag-title">è¯•è¯•è¿™äº›è¯é¢˜ï¼š</view>
    <view class="tag-list">
      <view 
        class="tag" 
        wx:for="{{hotTags}}" 
        wx:key="*this" 
        bindtap="onTagTap" 
        data-text="{{item}}"
      >
        #{{item}}
      </view>
    </view>
  </view>

  <view class="result-area" wx:if="{{showResult}}">
    <view class="result-header">âœ¨ ç”Ÿæˆç»“æœ</view>
    <view class="tip-text">ç‚¹å‡»å¡ç‰‡ï¼Œç”Ÿæˆåˆ†äº«å›¾ç‰‡</view>
    
    <block wx:for="{{suggestions}}" wx:key="index">
      <view class="suggestion-card level-{{item.level === 'è§‚å¯Ÿç±»' ? '0' : (item.level === 'äº’åŠ¨ç±»' ? '1' : '2')}}">
        <view class="card-header">
          <view class="level-badge">
            <text class="badge-icon">{{categoryIcons[item.level]}}</text>
            <text>{{item.level}}</text>
          </view>
          <text class="card-title">{{item.title}}</text>
        </view>
        <view class="card-desc">{{item.desc}}</view>
        <button class="adopt-btn" bindtap="onViewDetail" data-index="{{index}}">æŸ¥çœ‹è¯¦æƒ…</button>
      </view>
    </block>
    
    <view class="re-generate" bindtap="generate">ä¸æ»¡æ„ï¼Ÿæ¢ä¸€æ‰¹è¯•è¯• ğŸ”„</view>
  </view>

  <!-- è¯¦æƒ…å¼¹çª— -->
  <view class="modal-mask" wx:if="{{showModal}}" bindtap="closeModal">
    <view class="modal-content" catchtap="preventBubble">
      <view class="modal-header">
        <view class="user-question">â€œ {{inputValue}} â€</view>
      </view>
      
      <view class="modal-body">
        <view class="idea-box">
          <view class="idea-label">
            <text>{{categoryIcons[selectedItem.level]}}</text>
            <text>{{selectedItem.level}}</text>
          </view>
          <view class="idea-title">{{selectedItem.title}}</view>
          <view class="idea-desc">{{selectedItem.desc}}</view>
        </view>
      </view>
      
      <view class="modal-footer">
        <button class="footer-btn save-btn" bindtap="saveImage">ä¿å­˜å¡ç‰‡</button>
        <button class="footer-btn share-btn" open-type="share">åˆ†äº«ç»™å¥½å‹</button>
      </view>
      
      <view class="modal-close" bindtap="closeModal">âœ•</view>
    </view>
  </view>
  
  <view class="loading-area" wx:if="{{isLoading}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">ğŸ¤” AI æ­£åœ¨æ€è€ƒä¸­...</text>
  </view>

  <!-- éšè—çš„ç”»å¸ƒï¼Œç”¨äºç”Ÿæˆåˆ†äº«å›¾ç‰‡ -->
  <canvas type="2d" id="shareCanvas" canvas-id="shareCanvas" style="width: 600px; height: 800px; position: fixed; left: -2000px;"></canvas>
</view>
