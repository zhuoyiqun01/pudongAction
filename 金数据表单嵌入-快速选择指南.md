# 金数据表单嵌入小程序 - 快速选择指南

## 🎯 三步选择你的方案

### 第一步：确认你的需求

- [ ] **需要收集微信用户信息**（OpenID、UnionID、微信昵称）？
  - ✅ 是 → **选择方案三**
  - ❌ 否 → 继续第二步

### 第二步：确认你的套餐

- [ ] **是否已购买企业基础版及以上套餐**（4,399元/年）？
  - ✅ 是 → **选择方案一**（推荐，体验最好）
  - ❌ 否 → **选择方案二**（免费版可用）

---

## 📋 三种方案对比

| 方案 | 成本 | 需要收集微信信息 | 体验 | 配置难度 |
|------|------|----------------|------|---------|
| **方案一：web-view + 二级域名** | 4,399元/年 | ❌ 不支持 | ⭐⭐⭐⭐⭐ | ⭐⭐ |
| **方案二：web-view + jinshuju.net** | 免费 | ❌ 不支持 | ⭐⭐⭐⭐ | ⭐⭐ |
| **方案三：跳转金数据小程序** | 免费 | ✅ 支持 | ⭐⭐⭐ | ⭐⭐⭐ |

---

## 🚀 方案一：web-view + 二级域名（企业版）

### 适用场景
- ✅ 已购买企业基础版及以上套餐
- ✅ 不需要收集微信信息
- ✅ 希望最佳用户体验

### 操作步骤
1. **联系金数据客服**（400-800-6886 或在线客服）
   - 申请二级域名（如：`xiaojin.jinshuju.com`）
2. **在小程序后台配置业务域名**
   - 添加你的二级域名
   - 下载验证文件
   - **将验证文件发送给金数据客服**（客服会帮你上传）
3. **在表单设置中开启"不收集用户信息"**
4. **使用新的二级域名链接**

### 详细文档
👉 查看 [完整配置说明.md](./金数据表单嵌入配置说明.md#方案一使用-web-view--金数据二级域名推荐)

---

## 🚀 方案二：web-view + jinshuju.net（免费版）

### 适用场景
- ✅ 免费版/专业版套餐
- ✅ 不需要收集微信信息
- ✅ 希望在小程序中直接嵌入

### 操作步骤
1. **在表单设置中开启"不收集用户信息"**
2. **在小程序后台配置业务域名**
   - 添加域名：`jinshuju.net`
   - 下载验证文件
   - **将验证文件发送给金数据客服**（客服会帮你上传）
3. **使用 `jinshuju.net` 域名的表单链接**

### 详细文档
👉 查看 [完整配置说明.md](./金数据表单嵌入配置说明.md#方案二使用-web-view--jinshujunet免费方案)

---

## 🚀 方案三：跳转金数据小程序（需要收集微信信息）

### 适用场景
- ✅ 需要收集微信用户信息
- ✅ 免费版套餐即可
- ✅ 可以接受跳转到金数据小程序

### ⚠️ 重要：无需联系客服！

**方案三不需要联系金数据客服**，只需要在小程序后台自己配置跳转权限即可。

### 操作步骤
1. **在表单设置中开启"收集用户信息"**
2. **获取表单的小程序路径**
   - 表单发布页面 → 复制"小程序表单路径"
   - **推荐格式**：`pages/forms/publish?token=xxxxx`
   - 兼容格式：`pages/form/index?entry=xxxxx`
3. **在 CMS 中配置 `register_jsj` 字段**
   - 字段名：`register_jsj`（推荐使用）
   - 直接使用路径，不要添加 `https://` 前缀
   - 示例：`pages/forms/publish?token=xlSV2U`
   - 注意：`register_url` 字段保留用于兼容旧数据或其他类型链接
4. **小程序后台配置跳转权限**（仅需一次）
   - 设置 → 基本设置 → 小程序跳转小程序
   - 添加 AppID：`wx34b0738d0eef5f78`
   - 注意：根据微信最新规则，可能不需要配置，代码会直接尝试跳转
5. **代码已支持**（无需修改）

### 详细文档
👉 查看 [完整配置说明.md](./金数据表单嵌入配置说明.md#方案三跳转金数据小程序无需配置域名无需联系客服)

---

## ⚠️ 重要提示

### 关于验证文件

**关键点**：对于金数据的域名，你**无法直接上传验证文件**，因为这是第三方域名。

**正确做法**：
1. 在小程序后台下载验证文件
2. **将验证文件发送给金数据客服**
3. 客服会帮你上传到域名根目录
4. 等待客服确认后，在小程序后台完成验证

**不要尝试**：
- ❌ 自己上传验证文件到金数据域名（你没有权限）
- ❌ 修改验证文件内容（会导致验证失败）

### 关于微信信息收集

- **不需要收集** → 使用方案一或方案二（web-view 嵌入）
- **需要收集** → 必须使用方案三（跳转金数据小程序）

---

## 📞 需要帮助？

- **金数据客服**：
  - 在线客服：登录金数据后台，点击"在线客服"
  - 电话：400-800-6886
  - 时间：工作日 9:00-18:00

- **参考文档**：
  - [金数据官方文档 - 表单嵌入自研微信小程序](https://nexthelp.jinshuju.net/articles/mini-3rd)
  - [完整配置说明](./金数据表单嵌入配置说明.md)

---

## ✅ 代码已就绪

所有方案的代码已实现，你只需要：
1. 选择适合的方案
2. 按照步骤配置
3. 测试功能

代码会自动识别并处理不同格式的金数据表单链接！

## 📝 后台配置标准（方案三）

**字段名：** `register_jsj`（推荐）

**标准格式：** `pages/forms/publish?token=xxxxx`

**在 CMS 中配置示例：**
```javascript
{
  register_jsj: "pages/forms/publish?token=xlSV2U",  // 金数据小程序路径（推荐）
  register_url: "https://example.com/form"            // 其他链接（可选，兼容旧数据）
}
```

**字段说明：**
- `register_jsj`：专门用于存储金数据小程序路径（推荐使用）
- `register_url`：保留字段，用于兼容旧数据或其他类型链接

**详细配置说明：**
👉 查看 [金数据报名链接配置规范.md](./金数据报名链接配置规范.md)

