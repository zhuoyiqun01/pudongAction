# æ§åˆ¶å°æ‰§è¡Œè¯´æ˜

## ğŸš€ å¿«é€Ÿæ‰§è¡Œ

### æ–¹æ³• 1: ç›´æ¥å¤åˆ¶æ•´ä¸ªæ–‡ä»¶å†…å®¹

1. æ‰“å¼€ `utils/save-image-config-ç›´æ¥ä½¿ç”¨.js` æ–‡ä»¶
2. **å…¨é€‰å¤åˆ¶**æ•´ä¸ªæ–‡ä»¶å†…å®¹
3. åœ¨å°ç¨‹åºæ§åˆ¶å°ç²˜è´´
4. æŒ‰å›è½¦æ‰§è¡Œ

ä»£ç ä¼šè‡ªåŠ¨æ‰§è¡Œï¼Œä½ ä¼šçœ‹åˆ°ï¼š
- `ğŸš€ å¼€å§‹ä¿å­˜ 6 ä¸ª Banner å›¾ç‰‡é…ç½®...`
- `âœ… è¿›åº¦: 1/6 - leaders1.jpeg`
- `âœ… è¿›åº¦: 2/6 - leaders2.jpeg`
- ... ä¾æ¬¡æ˜¾ç¤ºè¿›åº¦
- `ğŸ‰ å®Œæˆï¼æˆåŠŸä¿å­˜ 6/6 ä¸ªé…ç½®`
- `âœ… å…¨éƒ¨å®Œæˆï¼` + ç»“æœæ•°ç»„

### æ–¹æ³• 2: åˆ†æ­¥æ‰§è¡Œ

å¦‚æœæ–¹æ³•1ä¸è¡Œï¼Œå¯ä»¥åˆ†æ­¥æ‰§è¡Œï¼š

#### æ­¥éª¤ 1: å¤åˆ¶å‡½æ•°å®šä¹‰

```javascript
// ä¿å­˜å•ä¸ªå›¾ç‰‡é…ç½®
async function saveSingleImage(config) {
  const { cloudPath, category, name, page, type, order } = config
  
  return new Promise((resolve, reject) => {
    wx.cloud.callFunction({
      name: 'uploadImage',
      data: {
        cloudPath: cloudPath,
        category: category,
        name: name,
        page: page,
        type: type,
        order: order
      },
      success: (res) => {
        if (res.result.success) {
          console.log('âœ… ä¿å­˜æˆåŠŸ:', res.result.data)
          resolve(res.result.data)
        } else {
          reject(new Error(res.result.message || 'ä¿å­˜å¤±è´¥'))
        }
      },
      fail: reject
    })
  })
}

// æ‰¹é‡ä¿å­˜ Banner å›¾ç‰‡é…ç½®
async function saveBannerImages(cloudFileIDs, page = 'leaders') {
  console.log(`ğŸš€ å¼€å§‹ä¿å­˜ ${cloudFileIDs.length} ä¸ª Banner å›¾ç‰‡é…ç½®...`)
  
  const results = []
  for (let i = 0; i < cloudFileIDs.length; i++) {
    try {
      const fileName = cloudFileIDs[i].split('/').pop()
      const result = await saveSingleImage({
        cloudPath: cloudFileIDs[i],
        category: 'banner',
        page: page,
        order: i + 1,
        name: fileName.split('.')[0]
      })
      results.push(result)
      console.log(`âœ… è¿›åº¦: ${i + 1}/${cloudFileIDs.length} - ${fileName}`)
    } catch (error) {
      console.error(`âŒ ä¿å­˜å¤±è´¥ (${i + 1}):`, error)
    }
  }
  
  console.log(`ğŸ‰ å®Œæˆï¼æˆåŠŸä¿å­˜ ${results.length}/${cloudFileIDs.length} ä¸ªé…ç½®`)
  return results
}
```

#### æ­¥éª¤ 2: æ‰§è¡Œä¿å­˜

```javascript
const bannerFileIDs = [
  'cloud://cloud1-3g71minke37b68b6.636c-cloud1-3g71minke37b68b6-1393420244/images/banner/leaders1.jpeg',
  'cloud://cloud1-3g71minke37b68b6.636c-cloud1-3g71minke37b68b6-1393420244/images/banner/leaders2.jpeg',
  'cloud://cloud1-3g71minke37b68b6.636c-cloud1-3g71minke37b68b6-1393420244/images/banner/leaders3.jpeg',
  'cloud://cloud1-3g71minke37b68b6.636c-cloud1-3g71minke37b68b6-1393420244/images/banner/leaders4.png',
  'cloud://cloud1-3g71minke37b68b6.636c-cloud1-3g71minke37b68b6-1393420244/images/banner/leaders5.jpeg',
  'cloud://cloud1-3g71minke37b68b6.636c-cloud1-3g71minke37b68b6-1393420244/images/banner/leaders6.jpeg',
]

saveBannerImages(bannerFileIDs, 'leaders')
```

## âœ… éªŒè¯æ‰§è¡Œç»“æœ

æ‰§è¡ŒæˆåŠŸåï¼Œä½ åº”è¯¥çœ‹åˆ°ï¼š

1. **æ§åˆ¶å°è¾“å‡º**ï¼š
   ```
   ğŸš€ å¼€å§‹ä¿å­˜ 6 ä¸ª Banner å›¾ç‰‡é…ç½®...
   âœ… ä¿å­˜æˆåŠŸ: {id: "...", cloudPath: "...", ...}
   âœ… è¿›åº¦: 1/6 - leaders1.jpeg
   âœ… ä¿å­˜æˆåŠŸ: {id: "...", cloudPath: "...", ...}
   âœ… è¿›åº¦: 2/6 - leaders2.jpeg
   ...
   ğŸ‰ å®Œæˆï¼æˆåŠŸä¿å­˜ 6/6 ä¸ªé…ç½®
   âœ… å…¨éƒ¨å®Œæˆï¼ [{...}, {...}, ...]
   ```

2. **æ•°æ®åº“æ£€æŸ¥**ï¼š
   - æ‰“å¼€äº‘å¼€å‘æ§åˆ¶å° â†’ æ•°æ®åº“ â†’ `image_config` é›†åˆ
   - åº”è¯¥èƒ½çœ‹åˆ° 6 æ¡æ–°è®°å½•
   - æ¯æ¡è®°å½•çš„ `category` ä¸º `banner`ï¼Œ`page` ä¸º `leaders`

3. **æµ‹è¯•å°ç¨‹åº**ï¼š
   - é‡æ–°ç¼–è¯‘å°ç¨‹åº
   - æ‰“å¼€"å¸¦é¢†äºº"é¡µé¢
   - Banner åº”è¯¥æ­£å¸¸æ˜¾ç¤º

## ğŸ”§ å¦‚æœæ˜¾ç¤º undefined

å¦‚æœæ‰§è¡Œåæ˜¾ç¤º `undefined`ï¼Œå¯èƒ½çš„åŸå› ï¼š

1. **å‡½æ•°æœªå®šä¹‰**ï¼š
   - ç¡®ä¿å…ˆå¤åˆ¶äº†å‡½æ•°å®šä¹‰ä»£ç 
   - æ£€æŸ¥æ§åˆ¶å°æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯

2. **å¼‚æ­¥å‡½æ•°æœªç­‰å¾…**ï¼š
   - `saveBannerImages` æ˜¯å¼‚æ­¥å‡½æ•°
   - å¦‚æœç›´æ¥è°ƒç”¨ `saveBannerImages(...)` ä¼šè¿”å› Promise
   - éœ€è¦ç­‰å¾… Promise å®Œæˆæ‰èƒ½çœ‹åˆ°ç»“æœ

3. **æ‰§è¡Œæ–¹å¼**ï¼š
   - ç¡®ä¿ä»£ç å®Œæ•´å¤åˆ¶
   - ç¡®ä¿æŒ‰å›è½¦æ‰§è¡Œ
   - æ£€æŸ¥æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯

## ğŸ’¡ è°ƒè¯•æŠ€å·§

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥ï¼š

1. **æ£€æŸ¥å‡½æ•°æ˜¯å¦å®šä¹‰**ï¼š
   ```javascript
   typeof saveBannerImages  // åº”è¯¥è¿”å› "function"
   ```

2. **æ‰‹åŠ¨æµ‹è¯•å•ä¸ªä¿å­˜**ï¼š
   ```javascript
   saveSingleImage({
     cloudPath: 'cloud://cloud1-3g71minke37b68b6.636c-cloud1-3g71minke37b68b6-1393420244/images/banner/leaders1.jpeg',
     category: 'banner',
     page: 'leaders',
     order: 1,
     name: 'leaders1'
   })
   ```

3. **æ£€æŸ¥äº‘å‡½æ•°**ï¼š
   ```javascript
   wx.cloud.callFunction({
     name: 'uploadImage',
     data: {
       cloudPath: 'cloud://cloud1-3g71minke37b68b6.636c-cloud1-3g71minke37b68b6-1393420244/images/banner/leaders1.jpeg',
       category: 'banner',
       page: 'leaders',
       order: 1
     }
   })
   ```



